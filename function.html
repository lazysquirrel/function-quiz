<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>MathBox - Procedural Vectors</title>
    <script src="build/mathbox-bundle.min.js"></script>
    <link rel="stylesheet" href="build/mathbox.css">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
</head>
<body>
<script>
    var functions = [
            function (x, y) {
                return sin(x*y);
            },
            function (x, y) {
                return Math.sqrt(x*y);
            },
            function (x, y) {
                return ((x*x) +2.5*(y*y)-y)*Math.exp(1-((x*x)+(y*y)))* 0.3;
            },
            function (x, y) {
                return 1 - (x*x+y*y);
            }
    ];

    function sin(value) {

        return Math.sin(value)
    }

    function showFunction(index) {

        mathbox = mathBox({
            plugins: ['core', 'controls', 'cursor'],
            controls: {
                klass: THREE.OrbitControls
            }
        });
        three = mathbox.three;

        three.camera.position.set(3.5, 1.4, -2.3);
        three.renderer.setClearColor(new THREE.Color(0x204060), 1.0);

        time = 0;
        three.on('update', function () {
            clock = three.Time.clock;
            time = clock / 4;
        });

        xRange = 3;
        zRange = 3;

        view = mathbox
                .unit({
                    scale: 720
                })
                .cartesian({
                    range: [[-xRange, xRange], [0, 0], [-zRange, zRange]],
                    scale: [1, 1, 1]
                });

        view.grid({
            width: 5,
            opacity: 0.5,
            axes: [1, 3]
        });

        view.area({
            id: 'sampler',
            width: 83,
            height: 83,
            axes: [1, 3],
            expr: function (emit, x, y) {
                emit(x, functions[index](x, y), y)
            }
        });
        view.surface({
            lineX: true,
            lineY: true,
            shaded: true,
            color: 0x5090FF,
            width: 5
        });


        surface = mathbox.select('surface');
        vector = mathbox.select('vector');
    }
</script>

<!--<button style="position: absolute;top: 0;left: 0" onclick="dumpData()">dump data</button>-->

</body>
</html>
